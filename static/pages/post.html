{{ template "base" . }}
{{ define "header" }}

<title>{{.Content.Post.Title}} | Forum</title>
<link rel="stylesheet" href="/css/post.css">

{{ end }}

{{ define "body" }}

<div class="container">
	<div class="topic">
		<div class="title">{{.Content.Post.Title}}</div>
		<div class="info">Posted by {{.Content.Post.User.Username}} on {{.Content.Post.Created}}</div>
		<div class="like"><i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart-crack"></i></div>
		<div class="content">{{.Content.Post.Content}}</div>
	</div>
	{{ $len := len .Content.Comments }}
	{{ if gt $len 0 }}
	{{ range $i, $comment := .Content.Comments }}
	<div class="comment">
		<p class="infocmt">Posted by {{ .User.Username }} on {{ .Created }}</p>
		<p class="likecmt"><i class="fa-solid fa-heart"></i><i class="fa-solid fa-heart-crack"></i></p>
		<p class="cmtcontent">{{ .Content }}</p>
	</div>
	{{ end }}
	{{ end }}
	{{ if .Logged }}
	<div class="comment-form">
		<form action="/post/comment" method="POST">
			<input type="hidden" name="post_id" value="{{.Content.Post.ID}}">
			<textarea name="content" placeholder="Write a comment..."></textarea>
			<button type="submit">Comment</button>
		</form>
	</div>
	{{ else }}
	<div class="comment-form">
		<p>You must be logged in to comment.</p>
	</div>
	{{ end }}
</div>

{{ end }}