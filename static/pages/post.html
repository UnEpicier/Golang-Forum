{{ template "base" . }}
{{ define "header" }}

<title>{{.Content.Post.Title}} | Forum</title>
<link rel="stylesheet" href="/css/post.css">

{{ end }}

{{ define "body" }}

<div class="container">
	<div class="topic">
		<div class="title">{{.Content.Post.Title}}</div>
		<div class="info">Posted by {{.Content.Post.User.Username}} on {{.Content.Post.CreationDate}}</div>
		<div class="like">
			<i class="fa-solid fa-heart"></i>
			<p>{{ .Content.Post.Likes }}</p>
			<i class="fa-solid fa-heart-crack"></i>
			<p>{{ .Content.Post.Dislikes }}</p>
		</div>
		<div class="content">{{.Content.Post.Content}}</div>
	</div>
	{{ $len := len .Content.Comments }}
	{{ if gt $len 0 }}
	{{ range $i, $comment := .Content.Comments }}
	<div class="comment">
		<p class="infocmt">Posted by {{ .User.Username }} on {{ .CreationDate }}</p>
		<div class="likecmt">
			<i class="fa-solid fa-heart"></i>
			<p>{{ .Likes }}</p>
			<i class="fa-solid fa-heart-crack"></i>
			<p>{{.Dislikes }}</p>
		</div>
		<p class="cmtcontent">{{ .Content }}</p>
	</div>
	{{ end }}
	{{ end }}
	{{ if .Logged }}
	<form method="POST" class="comment-form">
		<textarea name="content" id="comment-textarea" placeholder="Write a comment..." oninput="autoGrow()"></textarea>
		<button type="submit">Comment</button>
	</form>
	{{ else }}
	<div class="comment-form">
		<p>You must be logged in to comment.</p>
		<div class="row">
			<a href="/user/login" class="nav-btn primary">Login</a>
			<a href="/user/register" class="nav-btn secondary">Sign in</a>
		</div>
	</div>
	{{ end }}
</div>

<script src="/js/post.js"></script>

{{ end }}